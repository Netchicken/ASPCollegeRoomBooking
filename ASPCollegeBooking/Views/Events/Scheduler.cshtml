@{
    ViewData["Title"] = "The Scheduler";
}
<h1>Schedular</h1>


<div id="top">
    <div class="left">
        <div id="theme-system-selector" class="selector">
            Theme System:
            <select>
              <option value="jquery-ui" selected>jQuery UI</option>
                <option value="standard">unthemed</option>
            </select>
        </div>
        <div data-theme-system="jquery-ui" class="selector">
            Theme Name:
            <select>
                <option value="black-tie">Black Tie</option>
                <option value="blitzer">Blitzer</option>
                <option value="cupertino" selected>Cupertino</option>
                <option value="dark-hive">Dark Hive</option>
               <option value="eggplant">Eggplant</option>
                <option value="excite-bike">Excite Bike</option>
                <option value="flick">Flick</option>
                <option value="hot-sneaks">Hot Sneaks</option>
                <option value="humanity">Humanity</option>
                <option value="le-frog">Le Frog</option>
                <option value="mint-choc">Mint Choc</option>
                <option value="overcast">Overcast</option>
                <option value="pepper-grinder">Pepper Grinder</option>
                <option value="redmond">Redmond</option>
                <option value="smoothness">Smoothness</option>
                <option value="south-street">South Street</option>
                <option value="start">Start</option>
                <option value="sunny">Sunny</option>
                <option value="swanky-purse">Swanky Purse</option>
                <option value="trontastic">Trontastic</option>
                <option value="ui-darkness">UI Darkness</option>
                <option value="ui-lightness">UI Lightness</option>
                <option value="vader">Vader</option>
            </select>
        </div>
        <span id="loading" style="display:none">loading theme...</span>
        </div>

    <div class="right">
      <span class="credits" data-credit-id="jquery-ui">
            <a href="http://jqueryui.com/themeroller/" target="_blank">Theme by jQuery UI</a>
        </span>
    </div>
    <div class="clear"></div>
</div>



<script>
    $(function () { // document ready
    initThemeChooser({
        init: function(themeSystem) {


                    $('#calendar').fullCalendar({
                        themeSystem: themeSystem,
            now:  Date(),  //'2017-10-07',
            editable: true, // enable draggable events

            //This registers the Drag and drop 
                        eventDrop: function(event, delta, revertFunc) {
                            alert(event.title +  
                                "\n" + moment().format('MMMM Do YYYY, h:mm:ss a') + " was dropped  " +
                                "\n Start " + event.start.format("dddd MMMM YYYY") + 
                                "\n End " + event.end.format("dddd MMMM YYYY")+
                                "\n Room id " + event.resourceId +
                                "\n Row id " + event.id

    );

                            if (!confirm("Are you sure you want to change the room booking?")) {
                                alert("Goodbye then");
                                revertFunc();
                            } else {
                                alert("Lets Do this!"),
                                //stupid date formatting
                               // var formatStart = event.start.format("dd/MM/YYYY"),
                           //     var dateOut = $(event.start.format("dd/MM/YYYY")).val().split("/"),
                           //     var StartDateToSend = new Date(dateOut[1] + "/" + dateOut[0] + "/" + dateOut[2]),


                                $.ajax({
                                    type: "PUT",
                                    url: "/api/EventsAPI/" + event.id,
                                    contentType: "application/json",
                                    dataType: 'json',
                                    data: JSON.stringify( {
                                        //End: "2017-12-18T14:23:00",
                                        //EventColor: "Green",
                                        //ResourceId: "3",
                                        //ID: "f12afa3f-ba1a-44fc-9d31-de2773e70c98",
                                        //Start: "2017-11-16T14:32:00",
                                        //Title: "Thursday angst"
                                        End: event.end,
                                        EventColor: "",
                                        ResourceId: event.resourceId,
                                        ID: event.id,
                                        Start: event.start,
                                        Title: event.title
                                    }),
                               //    data: JSON.stringify(uploadevents),
                                      
                                       // $(event.start).val,//.format("dd/MM/YYYY HH:MM:SS ")).val(),
                                    //$(event.end).val(),
                                    //    Start: $("18/11/2017 2:23:00 PM"),
                                    //    End: $("18/12/2017 2:23:00 PM"),
                                             


                                   
                                    success: function () {
                                        alert("You Beut!");
                                    },
                                    failure: function (data) {  
                                      alert(data.responseText);  
                                    }, 
                                    error: function (data) {
                                        alert(data.responseText),
                                        alert("You Suck!");
                                    }

                                //        data: {
                                //           ID: $(event.id).val(),
                                //            ResourceId: $(event.resourceId).val(),
                                //            EventColor: $("").val(),
                                //            //17/11/2017 1:58:00 PM
                                //            Start: $(event.start.format("dd/MM/YYYY HH:MM:SS ")).val(),
                                //            End: $(event.end).val(),
                                //            Title: $("").val()


                                //}
                            });

                            };


                        },

                       

            aspectRatio: 1.8,
            scrollTime: '08:00', // undo default 6am scrollTime
            header: {
                left: 'today prev,next',
                center: 'title',
                right: 'timelineDay,timelineThreeDays,agendaWeek,month,listWeek'
            },
            defaultView: 'timelineDay',
            views: {
                timelineThreeDays: {
                    type: 'timeline',
                    duration: { days: 3 }
                }
            },
            resourceLabelText: 'Rooms',

            resources: { // you can also specify a plain string like 'json/resources.json'
                type: "GET",
                url: '/api/RoomsAPI',
                error: function() {
                    $('#script-warning').show();
                }
            },

            events: { // you can also specify a plain string like 'json/events.json'
                url: '/api/EventsAPI',
                error: function() {
                    $('#script-warning').show();
                }
            },

                        eventRender: function(event, element) {
                            element.qtip({
                                content: (event.title +  
                                    "\n Start " + event.start.format("dddd MMMM YYYY") + 
                                    "\n End " + event.end.format("dddd MMMM YYYY")+
                                    "\n Room id " + event.resourceId +
                                    "\n Row id " + event.id
                                    ),
                                position: {
                                    //adjust: {
                                    //    method: 'flipinvert'
                                    //},
                                    viewport: $(window)
                                   // my: 'top left'
                                }
                            });
            },

                        businessHours: {
                            // days of week. an array of zero-based day of week integers (0=Sunday)
                            dow: [ 1, 2, 3, 4,5 ], // Monday - Thursday

                            start: '8:00', // a start time (8am in this example)
                            end: '17:00' // an end time (5pm in this example)
                        }
                });
            },

            change: function(themeSystem) {
                $('#calendar').fullCalendar('option', 'themeSystem', themeSystem);
            }

        });

    });

</script>

<style>
    body {
        margin: 40px 10px;
        padding: 0;
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
        font-size: 14px;
    }

    #calendar {
        max-width: 900px;
        margin: 0 auto;
    }

    #top,
    #calendar.fc-unthemed {
        font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
    }

    #top {
        background: #eee;
        border-bottom: 1px solid #ddd;
        padding: 0 10px;
        line-height: 40px;
        font-size: 12px;
        color: #000;
    }

    #top .selector {
        display: inline-block;
        margin-right: 10px;
    }

    #top select {
        font: inherit; /* mock what Boostrap does, don't compete  */
    }

    .left { float: left }
    .right { float: right }
    .clear { clear: both }



</style>
<a asp-area="" asp-controller="Events" asp-action="Create">Create an Event</a>
<div id="calendar"></div>